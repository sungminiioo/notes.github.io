# React + JWT 인증 & 로그아웃



## 1. 로그인 & 토큰 발급

- 사용자가 로그인하면 서버가 **JWT 발급**
    - **액세스 토큰**: 짧게(예: 15분) → API 요청용
    - **리프레시 토큰**: 길게(예: 7일) → 새 토큰 발급용
- 클라이언트는 토큰을 저장 (**localStorage / sessionStorage / 쿠키**)



## 2. 인증된 요청

- API 요청 시 `Authorization: Bearer 토큰` 헤더에 담아 보냄
- 서버가 토큰 유효성 검사 → 통과하면 데이터 응답



## 3. 토큰 갱신

- 액세스 토큰 만료 시 → 리프레시 토큰으로 새 토큰 재발급



## 4. 로그아웃 방법

### 클라이언트 로그아웃 (기본)

- 저장된 토큰 삭제
- 로그인 페이지로 리다이렉트
- 단점: 서버는 여전히 토큰을 유효하다고 볼 수 있음

### 서버 로그아웃 (보안 강화)

- 로그아웃 요청 시 → 서버가 리프레시 토큰 무효화
- 클라이언트는 저장소 비움
- 장점: 탈취된 토큰도 쓸 수 없음



## 5. 비교표

| 방식 | 동작 | 장점 | 단점 |
| --- | --- | --- | --- |
| 클라이언트 로그아웃 | 토큰만 삭제 | 구현 간단 | 탈취 토큰 여전히 유효 |
| 서버 로그아웃 | 서버가 토큰 무효화 | 안전함 | 구현 조금 복잡 |



## ✅ 결론

- **JWT 인증 기본 흐름**: 로그인 시 토큰 발급 → 요청마다 토큰 전달 → 만료 시 갱신
- **로그아웃**: 간단히 하려면 **클라이언트 로그아웃**, 보안 중요하면 **서버 로그아웃**


# 모범 답안

# 📌 React에서 JWT 인증 시스템 구현

---

## 1️⃣ 로그인 시 JWT 발급

- 사용자가 **로그인 요청** → 서버가 자격 증명 검증
- 검증 성공 시 **JWT 생성 후 클라이언트에 반환**
- JWT에는 보통 다음 정보 포함
    - 사용자 ID
    - 권한(roles/permissions)
- 서버는 **비밀키로 서명** → 변조 방지

---

## 2️⃣ 클라이언트에서 JWT 저장

- React 앱에서 **localStorage** 또는 **sessionStorage**에 JWT 저장
- 이후 API 요청 시 **HTTP 헤더(Authorization: Bearer 토큰)**에 포함
- 서버는 토큰을 검증해 요청 처리

> ✅ 이렇게 하면 사용자가 앱을 사용하는 동안 인증 상태 유지 가능
> 

---

## 3️⃣ 로그아웃 구현

- 로그아웃 시 **클라이언트 저장소(localStorage/sessionStorage)에서 JWT 삭제**
- JWT가 사라지면 이후 요청은 인증 실패 → 자동으로 접근 차단
- 기본적인 로그아웃은 **클라이언트 사이드 처리**로 충분

---

## 4️⃣ 보안 강화 방법

- **HTTPOnly 쿠키 사용**
    - JWT를 쿠키에 저장할 때 `HTTPOnly` 옵션 적용
    - JS에서 쿠키 접근 불가 → XSS 공격 방지
- **서버 측 토큰 무효화 (선택적)**
    - 로그아웃 시 서버에 토큰 블랙리스트를 두어 무효화 가능
    - 하지만 토큰 기반 인증은 기본적으로 stateless → 이 과정은 추가적인 보안 장치

---

## 5️⃣ 핵심 정리

- **로그인**: 서버가 JWT 발급 (ID, 권한 포함, 서명)
- **인증 유지**: 클라이언트 저장소에 보관, 요청 시 헤더에 포함
- **로그아웃**: 클라이언트에서 JWT 삭제 (세션 종료 효과)
- **보안 강화**: HTTPOnly 쿠키 사용, 서버 측 토큰 무효화 고려
