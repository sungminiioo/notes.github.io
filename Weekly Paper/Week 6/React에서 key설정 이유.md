# 🧩 React에서 배열 렌더링 시 `key`를 설정해야 하는 이유

> React는 배열을 렌더링할 때 각 요소의 “고유한 식별자(key)”를 통해 어떤 항목이 변경/추가/삭제되었는지를 파악해요.
> 

---

### ✅ 이유 1. **효율적인 렌더링 (성능 향상)**

- key를 통해 **Virtual DOM의 diff 알고리즘**이 어떤 요소가 바뀌었는지 정확하게 추적 가능
- key가 없다면 React는 **전체 배열을 다시 렌더링**하게 되어 성능이 떨어짐

---

### ✅ 이유 2. **UI 이상 방지**

- key가 없거나 중복되면 React가 **렌더링 순서를 잘못 판단**해 예상치 못한 UI 오류 발생 가능
- 예: 리스트 중 하나만 수정했는데 전체가 깜빡거리거나 순서가 꼬이는 현상

---

## ⚠️ key 설정 시 주의할 점

| 주의 사항 | 설명 |
| --- | --- |
| 🔢 `index` 사용은 **가능하면 피하기** | 리스트 항목이 **변경/삭제/삽입되는 경우** 잘못된 UI 업데이트 발생 위험 |
| 🔐 **고유한 값 사용하기** | 데이터의 고유 ID(`item.id`)처럼 **절대 중복되지 않는 값**을 사용하는 것이 좋음 |
| 🔁 key는 **항상 같은 항목에 고정** | key가 바뀌면 해당 요소를 **새로 생성**한 것으로 인식하여 비효율적 처리 가능 |

---

## 💡 예시 코드

```jsx
// ✅ 좋은 예: 고유한 ID 사용
{items.map(item => (
  <li key={item.id}>{item.name}</li>
))}

// ⚠️ 나쁜 예: 인덱스 사용 (순서가 바뀌면 문제 발생 가능)
{items.map((item, index) => (
  <li key={index}>{item.name}</li>
))}

```

---

## ✅ 핵심 정리

| 항목 | 설명 |
| --- | --- |
| key 역할 | 요소의 **고유 식별자**로, React가 어떤 항목이 바뀌었는지 빠르게 판단 |
| 좋은 key | **고유하고 변하지 않는 값** (예: 데이터의 ID) |
| index를 key로 쓸 경우 | **정렬이나 항목 수정이 없는 경우에만 사용 권장** |
