# ìºì‹± ë§¤ì»¤ë‹ˆì¦˜

### ğŸ“… ë‚ ì§œ:

> 2025.09.16 (í™”)
> 

### ğŸ“˜ ì˜¤ëŠ˜ ê³µë¶€í•œ ì£¼ì œ:

> Next.jsì—ì„œ Route Cache, Full Route Cache, Request Memoization, Data Cache ë“± ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ìºì‹± êµ¬ì¡° ì´í•´ ë° í™œìš©
> 

---

## ğŸ“ í•µì‹¬ ê°œë… ìš”ì•½

- **ìºì‹± íë¦„**
    1. **ì²« ìš”ì²­**
        - Route Cache í™•ì¸ â†’ MISS â†’ Full Route Cache í™•ì¸ â†’ HIT/ìƒˆ ë Œë”ë§
    2. **ë Œë”ë§ ê³¼ì •**
        - fetch ìš”ì²­ ë°œìƒ
        - Request Memoization í™•ì¸ â†’ MISS ì‹œ ê²°ê³¼ ì €ì¥
        - Data Cache í™•ì¸ â†’ MISS ì‹œ ì›ë³¸ ë°ì´í„° ê°€ì ¸ì™€ ì €ì¥
    3. **ë Œë”ë§ ê²°ê³¼ ì €ì¥**
        - Full Route Cache(ë””ìŠ¤í¬) ë° Route Cache(ë©”ëª¨ë¦¬)ì— SET
    4. **ì‚¬ìš©ì ì‘ë‹µ**
        - HTML + RSC Payload ì „ì†¡
        - ë‹¤ìŒ ë°©ë¬¸ ì‹œ ëŒ€ë¶€ë¶„ HITë¡œ ë¹ ë¥¸ ì‘ë‹µ
- **ìºì‹œ ì¢…ë¥˜**
    1. **Route Cache**: ë¸Œë¼ìš°ì € ì„¸ì…˜ ë‚´ RSC Payload ì €ì¥, ë¹ ë¥¸ í˜ì´ì§€ ì „í™˜ ê°€ëŠ¥, SSR í˜ì´ì§€ë„ HIT ê°€ëŠ¥
    2. **Full Route Cache**: ì„œë²„ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ê²°ê³¼ ì €ì¥, SSG/ISR/generateStaticParams ì ìš©
    3. **Request Memoization**: ê°™ì€ ë Œë”ë§ ì‚¬ì´í´ ë‚´ fetch ìš”ì²­ ì¼ì‹œì  ìºì‹±
    4. **Data Cache**: fetchë¡œ ê°€ì ¸ì˜¨ ì™¸ë¶€ ë°ì´í„° ì €ì¥, ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì ìš©
- **ìºì‹œ ë¬´íš¨í™”**
    - `revalidatePath()` â†’ íŠ¹ì • ê²½ë¡œ ìºì‹œ ì œê±°
    - `revalidateTag()` â†’ íŠ¹ì • íƒœê·¸ ë°ì´í„° ìºì‹œ ì œê±°
    - `router.refresh()` â†’ í´ë¼ì´ì–¸íŠ¸ì—ì„œ í˜„ì¬ ê²½ë¡œ ìƒˆë¡œê³ ì¹¨

## ğŸ“Š í•µì‹¬ ìš”ì•½ í‘œ

- **ìºì‹œ ê´€ë ¨ ì£¼ìš” ìš©ì–´**
    
    
    | ìš©ì–´ | ì„¤ëª… |
    | --- | --- |
    | Data Source | ì™¸ë¶€ DB, API ë“± ì›ë³¸ ë°ì´í„° |
    | MISS / HIT / SET | ìºì‹œ ìƒíƒœ í‘œì‹œ: MISS = ì—†ìŒ, HIT = ìˆìŒ, SET = ì €ì¥ |
    | Build Time / Request Time | ë¹Œë“œ ì‹œì  vs ì‚¬ìš©ì ìš”ì²­ ì‹œì  |
    
    | ìºì‹œ ì¢…ë¥˜ | ìœ„ì¹˜ | íŠ¹ì§• | ì ìš© ì˜ˆì‹œ |
    | --- | --- | --- | --- |
    | Route Cache | í´ë¼ì´ì–¸íŠ¸ ë©”ëª¨ë¦¬ | RSC Payload ì €ì¥, í˜ì´ì§€ ì „í™˜ ì†ë„ í–¥ìƒ | SSR í˜ì´ì§€ ì¬ë°©ë¬¸ |
    | Full Route Cache | ì„œë²„ ë””ìŠ¤í¬ | HTML + RSC Payload ì €ì¥, SSG/ISR/generateStaticParams ì ìš© | SSG í˜ì´ì§€, pre-rendered dynamic pages |
    | Request Memoization | ì„œë²„/ë Œë”ë§ ì‚¬ì´í´ | ë™ì¼ fetch ìš”ì²­ ì¬ì‚¬ìš© | ë™ì¼ ë Œë”ë§ ì‚¬ì´ fetch í˜¸ì¶œ |
    | Data Cache | ì„œë²„ | ì™¸ë¶€ ë°ì´í„°(API, DB) ìºì‹± | fetch(url, { cache: "force-cache" }) |

### ğŸ’» ì‹¤ìŠµ ë‚´ìš© ì •ë¦¬

1. **Request Memoization**

```jsx
async function Page() {
  const data1 = await fetch('https://api.example.com/data', { cache: 'force-cache' });
  const data2 = await fetch('https://api.example.com/data', { cache: 'force-cache' }); // HIT!
  const result1 = await data1.json();
  const result2 = await data2.json();
}
```

1. **React cache í™œìš©**

```jsx
import { cache } from 'react'

export const getUser = cache(async (id) => {
  const user = await db.query(...);
  return transformUserData(user);
})
```

1. **ìºì‹œ ë¬´íš¨í™” ì˜ˆì‹œ**

```jsx
import { revalidatePath, revalidateTag } from 'next/cache';
import { router } from 'next/router';

// íŠ¹ì • ê²½ë¡œ ë¬´íš¨í™”
revalidatePath('/posts');

// íŠ¹ì • íƒœê·¸ ë°ì´í„° ë¬´íš¨í™”
revalidateTag('post');

// í´ë¼ì´ì–¸íŠ¸ì—ì„œ í˜„ì¬ ê²½ë¡œ ìƒˆë¡œê³ ì¹¨
router.refresh();
```

### â— í—·ê°ˆë ¸ë˜ ì  / ë¬¸ì œ í•´ê²°:

- Route Cacheì™€ Full Route Cache êµ¬ë¶„ í˜¼ë™ â†’ Route Cache = ë©”ëª¨ë¦¬, Full Route Cache = ì„œë²„ ë””ìŠ¤í¬ ì €ì¥
- SSR í˜ì´ì§€ë„ ìºì‹œ HITê°€ ê°€ëŠ¥ â†’ `no-store` ì˜µì…˜ ì‚¬ìš© ì‹œ ì œì™¸
- Request Memoizationê³¼ Data Cache í˜¼ë™ â†’ Memoization = ë Œë”ë§ ì‚¬ì´í´ ë‚´, Data Cache = fetch ê²°ê³¼ ì„œë²„ ì €ì¥

### ğŸ’¡ ëŠë‚€ ì  / ë°°ìš´ ì :

- Next.js ìºì‹± êµ¬ì¡° ì´í•´ â†’ í˜ì´ì§€ ë¡œë”© ìµœì í™” ê°€ëŠ¥
- ë‹¤ì–‘í•œ ìºì‹œ ê³„ì¸µê³¼ ì˜µì…˜(force-cache, no-store)ì„ ì ì ˆíˆ ì‚¬ìš©í•˜ë©´ UXì™€ ì„±ëŠ¥ í–¥ìƒ
- ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ìºì‹œ ë™ì‘ ì›ë¦¬ë¥¼ ì´í•´í•´ì•¼ íš¨ìœ¨ì ì¸ ë°ì´í„° íŒ¨ì¹­ ì „ëµ ìˆ˜ë¦½ ê°€ëŠ¥

### ğŸ·ï¸ í‚¤ì›Œë“œ (íƒœê·¸):

`#Next.js` `#ìºì‹±` `#Route Cache` `#Full Route Cache` `#Request Memoizatio` `#Data Cache` `#RSC Payload` `#SSR` `#SSG` `#ISR` `#ìºì‹œ ë¬´íš¨í™”` `#revalidatePath` `#revalidateTag`

| ë‚ ì§œ | ì£¼ì œ | í•µì‹¬ ìš”ì•½ | ì‹¤ìŠµ ë‚´ìš© | ë¬¸ì œ í•´ê²° / ëŠë‚€ ì  | í‚¤ì›Œë“œ íƒœê·¸ | ë³µìŠµ í•„ìš” |
| --- | --- | --- | --- | --- | --- | --- |
| 2025-09-16 | Next.js ìºì‹± ë§¤ì»¤ë‹ˆì¦˜ | Route Cache, Full Route Cache, Request Memoization, Data Cache, ìºì‹œ ë¬´íš¨í™” ì´í•´ | fetch Request Memoization, React cache, revalidatePath/Tag/Router.refresh ì‚¬ìš© | Route Cache vs Full Route Cache í˜¼ë™, SSRë„ ìºì‹œ HIT ê°€ëŠ¥ ì´í•´ | `#Next.js` `#ìºì‹±` `#Route Cache` `#Full Route Cache` `#Request Memoization` `#Data Cache` `#RSC Payload` `#SSR` `#SSG` `#ISR` | âœ… |
