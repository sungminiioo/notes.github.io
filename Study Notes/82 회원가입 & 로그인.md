# íšŒì›ê°€ì… & ë¡œê·¸ì¸

### ğŸ“… ë‚ ì§œ:

> 2025.10.29 (ìˆ˜)
> 

### ğŸ“˜ ì˜¤ëŠ˜ ê³µë¶€í•œ ì£¼ì œ:

> Express ê¸°ë°˜ MVC íŒ¨í„´ ì‹¤ìŠµ â€“ íšŒì›ê°€ì…(Signup)ê³¼ ë¡œê·¸ì¸(Login)
> 

---

## ğŸ“ í•µì‹¬ ê°œë… ìš”ì•½

- **Controller ì—­í• **: ìš”ì²­ ë°”ë”” ìœ íš¨ì„± ê²€ì‚¬, ì„œë¹„ìŠ¤ ê³„ì¸µ í˜¸ì¶œ, ì‘ë‹µ ë°˜í™˜
- **Service ì—­í• **: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬, Repository ê³„ì¸µ í˜¸ì¶œ, ì—ëŸ¬ throw
- **Repository ì—­í• **: DB ì ‘ê·¼ ì „ë‹´, CRUD ì²˜ë¦¬, ì¬ì‚¬ìš© ê°€ëŠ¥
- **íšŒì›ê°€ì…(Signup) íë¦„**:
    1. Controllerì—ì„œ ìš”ì²­ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
    2. Serviceì—ì„œ createUser í˜¸ì¶œ â†’ userRepository.save í˜¸ì¶œ
    3. ì„±ê³µ ì‹œ ì‘ë‹µ ë°˜í™˜
- **ë¡œê·¸ì¸(Login) íë¦„**:
    1. Controllerì—ì„œ ìš”ì²­ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
    2. Serviceì—ì„œ getUser í˜¸ì¶œ â†’ userRepository.findUserByEmail ë“± ì‚¬ìš©
    3. ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í›„ í† í°/ì„¸ì…˜ ìƒì„± ë° ì‘ë‹µ
- **ìœ íš¨ì„± ê²€ì‚¬**: í•„ìˆ˜ í•­ëª© ì¡´ì¬ ì—¬ë¶€ë§Œ ì²´í¬ (TODO 1,2ë²ˆ ê¸°ì¤€)
- **ì—ëŸ¬ ì²˜ë¦¬ ì›ì¹™**: Controllerì—ì„œ next(error), Serviceì—ì„œ throw

## ğŸ“Š í•µì‹¬ ìš”ì•½ í‘œ

| ê¸°ëŠ¥ | Controller | Service | Repository | ì£¼ìš” ì²˜ë¦¬ |
| --- | --- | --- | --- | --- |
| íšŒì›ê°€ì… | ìš”ì²­ ë°”ë”” ìœ íš¨ì„± ê²€ì‚¬ â†’ createUser í˜¸ì¶œ | userRepository.save í˜¸ì¶œ, ì—ëŸ¬ throw | DB ì €ì¥ | í•„ìˆ˜ í•­ëª© ì¡´ì¬ ì—¬ë¶€ í™•ì¸, íšŒì› ë°ì´í„° ì €ì¥ |
| ë¡œê·¸ì¸ | ìš”ì²­ ë°”ë”” ìœ íš¨ì„± ê²€ì‚¬ â†’ getUser í˜¸ì¶œ | userRepository.findUserByEmail í˜¸ì¶œ, ì—ëŸ¬ throw | DB ì¡°íšŒ | ì´ë©”ì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸, ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ |

### ğŸ’» ì‹¤ìŠµ ë‚´ìš© ì •ë¦¬

### 1ï¸âƒ£ íšŒì›ê°€ì…(Signup)

1. **Controller (userController.js)**

```jsx
// POST /users
export async function signup(req, res, next) {
  try {
    const { email, password, name } = req.body;

    // ìœ íš¨ì„± ê²€ì‚¬ (í•„ìˆ˜ í•­ëª© ì¡´ì¬ ì—¬ë¶€)
    if (!email || !password || !name) {
      throw new Error('Missing required fields');
    }

    // ì„œë¹„ìŠ¤ í˜¸ì¶œ
    const user = await createUser({ email, password, name });
    res.status(201).json(user);
  } catch (error) {
    next(error);
  }
}
```

1. **Service (userService.js)**

```jsx
import * as userRepository from '../repositories/userRepository.js';

export async function createUser({ email, password, name }) {
  // ì¤‘ë³µ ì²´í¬ ë“± ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¶”ê°€ ê°€ëŠ¥
  const newUser = await userRepository.save({ email, password, name });
  return newUser;
}
```

1. **HTTP í…ŒìŠ¤íŠ¸ (user.http)**

```
POST http://localhost:3000/users
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "1234",
  "name": "Alice"
}
```

---

### 2ï¸âƒ£ ë¡œê·¸ì¸(Login)

1. **Controller (userController.js)**

```jsx
// POST /users/login
export async function login(req, res, next) {
  try {
    const { email, password } = req.body;

    // ìœ íš¨ì„± ê²€ì‚¬
    if (!email || !password) {
      throw new Error('Missing required fields');
    }

    const user = await getUser({ email, password });
    res.status(200).json(user);
  } catch (error) {
    next(error);
  }
}
```

1. **Service (userService.js)**

```jsx
import * as userRepository from '../repositories/userRepository.js';

export async function getUser({ email, password }) {
  const user = await userRepository.findUserByEmail(email);
  if (!user || user.password !== password) {
    throw new Error('Invalid credentials');
  }
  return user;
}
```

1. **HTTP í…ŒìŠ¤íŠ¸ (user.http)**

```
POST http://localhost:3000/users/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "1234"
}
```

### â— í—·ê°ˆë ¸ë˜ ì  / ë¬¸ì œ í•´ê²°:

**ë¬¸ì œ:**

- Controllerì™€ Serviceì˜ ì—­í•  êµ¬ë¶„
- ë¡œê·¸ì¸ ì‹œ ë¹„ë°€ë²ˆí˜¸ ë¹„êµ ìœ„ì¹˜
- HTTP ìƒíƒœ ì½”ë“œ

**í•´ê²°:**

- ControllerëŠ” ìš”ì²­/ì‘ë‹µê³¼ ìœ íš¨ì„± ê²€ì‚¬ë§Œ, ServiceëŠ” DB í˜¸ì¶œ/ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
- Service ê³„ì¸µì—ì„œ Repositoryë¡œë¶€í„° ê°€ì ¸ì˜¨ ë°ì´í„°ì™€ ë¹„êµ
- íšŒì›ê°€ì…: 201 Created, ë¡œê·¸ì¸: 200 OK

### ğŸ’¡ ëŠë‚€ ì  / ë°°ìš´ ì :

- Controller/Service/Repository ì—­í• ì„ ëª…í™•íˆ ë‚˜ëˆ„ë©´ í…ŒìŠ¤íŠ¸ì™€ ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›€
- ìœ íš¨ì„± ê²€ì‚¬ëŠ” Controllerì—ì„œ ìµœì†Œí•œë§Œ ìˆ˜í–‰í•˜ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì€ Serviceì—ì„œ ì²˜ë¦¬
- HTTP í…ŒìŠ¤íŠ¸ íŒŒì¼(user.http)ì„ í†µí•´ ì‹¤ì œ ìš”ì²­ ì‹œë‚˜ë¦¬ì˜¤ í™•ì¸ ê°€ëŠ¥
- ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹(throw / next(error))ì„ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”

| ë‚ ì§œ | ì£¼ì œ | í•µì‹¬ ìš”ì•½ | ì‹¤ìŠµ ë‚´ìš© | ë¬¸ì œ í•´ê²° / ëŠë‚€ ì  | í‚¤ì›Œë“œ íƒœê·¸ | ë³µìŠµ í•„ìš” |
|------|------|----------|----------|------------------|-----------|-----------|
| 2025-10-29 | íšŒì›ê°€ì…/ë¡œê·¸ì¸ êµ¬í˜„ | MVC ë¶„ë¦¬<br>ìœ íš¨ì„± ê²€ì‚¬ | íšŒì›ê°€ì…<br>ë¡œê·¸ì¸ | êµ¬ì¡° ë¶„ë¦¬ ì¤‘ìš” | `#MVC` `#Express` | âœ… |
