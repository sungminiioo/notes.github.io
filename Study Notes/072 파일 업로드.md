# íŒŒì¼ ì—…ë¡œë“œ

### ğŸ“… ë‚ ì§œ:

> 2025.10.15 (ìˆ˜)
> 

### ğŸ“˜ ì˜¤ëŠ˜ ê³µë¶€í•œ ì£¼ì œ:

> Expressì—ì„œì˜ íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬, `multipart/form-data`, `multer` ë¯¸ë“¤ì›¨ì–´, ì •ì  íŒŒì¼ ì œê³µ, íŒŒì¼ ì €ì¥ êµ¬ì¡° ì„¤ê³„
> 

---

## ğŸ“ í•µì‹¬ ê°œë… ìš”ì•½

- `Content-Type` í—¤ë”ëŠ” ìš”ì²­ bodyì˜ ë°ì´í„° íƒ€ì…ì„ ëª…ì‹œí•˜ëŠ” ì†ì„±
- `application/json` â†’ JSON ë°ì´í„° ì „ì†¡
- `multipart/form-data` â†’ íŒŒì¼ ì—…ë¡œë“œìš© í¬ë§· (í…ìŠ¤íŠ¸ + ë°”ì´ë„ˆë¦¬ í˜¼í•© ê°€ëŠ¥)
- íŒŒì¼ ì „ì†¡ ë°©ì‹
    
    1ï¸âƒ£ Data URLë¡œ ì¸ì½”ë”© (ë¹„íš¨ìœ¨ì , í¬ê¸° ì¦ê°€)
    
    2ï¸âƒ£ **multipart/form-data** ë°©ì‹ (FormData ê°ì²´ í™œìš©)
    
- `multer` ë¯¸ë“¤ì›¨ì–´: multipart ìš”ì²­ì„ ì²˜ë¦¬í•´ ì„œë²„ì˜ íŠ¹ì • í´ë”ì— íŒŒì¼ ì €ì¥ ê°€ëŠ¥
- `express.static()` : ì—…ë¡œë“œëœ íŒŒì¼ì„ **URL ê²½ë¡œë¡œ ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •**
- ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì„œë²„ ë‚´ë¶€ ì €ì¥ ëŒ€ì‹  **AWS S3 ë“± ì™¸ë¶€ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ê³ , DBì—” URLë§Œ ì €ì¥**

## ğŸ“Š í•µì‹¬ ìš”ì•½ í‘œ

| êµ¬ë¶„ | ê¸°ëŠ¥ / ì—­í•  | ì£¼ìš” í‚¤ì›Œë“œ | ë¹„ê³  |
| --- | --- | --- | --- |
| **Content-Type** | body ë°ì´í„° íƒ€ì… ëª…ì‹œ | `application/json`, `multipart/form-data` | íŒŒì¼ ì—…ë¡œë“œ ì‹œ í•„ìˆ˜ |
| **FormData()** | multipart í˜•ì‹ ë°ì´í„° êµ¬ì„± | `append("image", file)` | fetchë¡œ ì „ì†¡ |
| **multer** | multipart ë°ì´í„° íŒŒì‹± ë° ì €ì¥ | `upload.single("file")` | íŒŒì¼ ì„œë²„ ì €ì¥ |
| **express.static()** | ì—…ë¡œë“œ íŒŒì¼ ì œê³µ | `app.use("/image", express.static("uploads"))` | ì •ì  íŒŒì¼ ì œê³µ ê²½ë¡œ |
| **AWS S3** | ì™¸ë¶€ ìŠ¤í† ë¦¬ì§€ ì €ì¥ì†Œ | `Presigned URL`, `Storage API` | ì‹¤ì œ ì„œë¹„ìŠ¤ìš© |
| **DB ì €ì¥ ë°©ì‹** | ì´ë¯¸ì§€ ì›ë³¸ ëŒ€ì‹  URL ì €ì¥ | `image_url` | ê³µê°„ íš¨ìœ¨ì  |

### ğŸ’» ì‹¤ìŠµ ë‚´ìš© ì •ë¦¬

### âœ… 1ï¸âƒ£ Data URLë¡œ íŒŒì¼ ì—…ë¡œë“œ (ë¹„ì¶”ì²œ ë°©ì‹)

```jsx
const reader = new FileReader();
reader.onload = function (event) {
  const dataURL = event.target.result;
  fetch('/upload', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ image: dataURL, fileName: file.name }),
  });
};
reader.readAsDataURL(file);
```

> âš ï¸ íŒŒì¼ì„ í…ìŠ¤íŠ¸ë¡œ ì¸ì½”ë”©í•˜ë©´ ìš©ëŸ‰ì´ 30% ì´ìƒ ì¦ê°€í•˜ë¯€ë¡œ ì‘ì€ íŒŒì¼ì—ë§Œ ì í•©.
> 

---

### âœ… 2ï¸âƒ£ multipart/form-data ë°©ì‹ (FormData ì‚¬ìš©)

```html
<form id="uploadForm" enctype="multipart/form-data">
  <input type="file" id="fileInput" name="file" />
  <button type="button" onclick="uploadFile()">ì—…ë¡œë“œ</button>
</form>

<script>
function uploadFile() {
  const file = document.getElementById("fileInput").files[0];
  const formData = new FormData();
  formData.append("image", file);

  fetch("https://panda-market-api.vercel.app/images/upload", {
    method: "POST",
    body: formData,
    headers: { Authorization: `Bearer ${accessToken}` },
  });
}
</script>
```

---

### âœ… 3ï¸âƒ£ ì„œë²„ì—ì„œ `multer` ì‚¬ìš©

```jsx
import express from "express";
import multer from "multer";

const app = express();
const upload = multer({ dest: "uploads/" });

app.post("/files", upload.single("imgs"), (req, res) => {
  console.log(req.file);
  res.json({ message: "íŒŒì¼ ì—…ë¡œë“œ ì™„ë£Œ" });
});
```

---

### âœ… 4ï¸âƒ£ ì •ì  íŒŒì¼ ì œê³µ (`express.static`)

```jsx
app.use("/image", express.static("uploads"));

app.post("/image", upload.single("attachment"), (req, res) => {
  const path = `/image/${req.file.filename}`;
  res.json({ message: "íŒŒì¼ ì—…ë¡œë“œ ì™„ë£Œ", path });
});
```

> /image/íŒŒì¼ëª…ìœ¼ë¡œ ë¸Œë¼ìš°ì € ì ‘ê·¼ ì‹œ ì—…ë¡œë“œëœ íŒŒì¼ì„ ë°”ë¡œ í™•ì¸ ê°€ëŠ¥.
> 

---

### âœ… 5ï¸âƒ£ ì‹¤ì œ ì„œë¹„ìŠ¤ íŒŒì¼ ì €ì¥ êµ¬ì¡°

- ì„œë²„ ì €ì¥ì€ í•œê³„ â†’ **í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ (AWS S3, GCP Storage)** ì‚¬ìš©
- DBì—ëŠ” ì´ë¯¸ì§€ URLë§Œ ì €ì¥

```
ğŸ“ uploads/
â”œâ”€â”€ abc123.jpg (ì‹¤ì œ íŒŒì¼)
ğŸ“„ DB
â””â”€â”€ image_url: "https://s3.amazonaws.com/bucket/abc123.jpg"
```

> âš™ï¸ ì‹¤ë¬´ì—ì„œëŠ” ì„œë²„ ë¶€í•˜ ì ˆê° + í™•ì¥ì„± í™•ë³´ë¥¼ ìœ„í•´ â€œí´ë¼ì´ì–¸íŠ¸ê°€ S3ë¡œ ì§ì ‘ ì—…ë¡œë“œ(Presigned URL)â€ ë°©ì‹ ì‚¬ìš©
> 

### â— í—·ê°ˆë ¸ë˜ ì  / ë¬¸ì œ í•´ê²°:

- **í—·ê°ˆë ¸ë˜ ì :**
    
    multipart í˜•ì‹ì´ ìë™ìœ¼ë¡œ ì„¤ì •ë˜ëŠ”ì§€, ì§ì ‘ `Content-Type`ì„ ì§€ì •í•´ì•¼ í•˜ëŠ”ì§€ í˜¼ë™ë¨.
    
- **ë¬¸ì œ í•´ê²°:**
    
    `FormData`ë¥¼ ì‚¬ìš©í•˜ë©´ ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ boundaryë¥¼ í¬í•¨í•œ `multipart/form-data` í—¤ë”ë¥¼ ì„¤ì •í•¨ì„ í™•ì¸.
    
    ì§ì ‘ ì§€ì •í•  í•„ìš” ì—†ìŒ.
    

### ğŸ’¡ ëŠë‚€ ì  / ë°°ìš´ ì :

- íŒŒì¼ ì—…ë¡œë“œëŠ” ë‹¨ìˆœíˆ ì„œë²„ì— ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì´ ì•„ë‹ˆë¼, **ì €ì¥ ìœ„ì¹˜ì™€ ë°ì´í„° ê´€ë¦¬ ì „ëµ**ì´ í•¨ê»˜ ì„¤ê³„ë˜ì–´ì•¼ í•¨ì„ ê¹¨ë‹¬ìŒ.
- Expressì˜ `multer`, `express.static` ë•ë¶„ì— ì—…ë¡œë“œì™€ íŒŒì¼ ì œê³µì´ ê°„ë‹¨í•˜ì§€ë§Œ, ì‹¤ë¬´ì—ì„œëŠ” **AWS S3ì™€ ê°™ì€ ì™¸ë¶€ ì €ì¥ì†Œ ì‚¬ìš©ì´ í•„ìˆ˜ì **ì„ì„ ì´í•´í•¨.
- í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ë¥¼ ì´ìš©í•˜ë©´ **íŠ¸ë˜í”½, ì €ì¥ê³µê°„, ë¹„ìš© ë©´ì—ì„œ í›¨ì”¬ íš¨ìœ¨ì **ì´ë¼ëŠ” ì ì„ ë°°ì›€.

### ğŸ·ï¸ í‚¤ì›Œë“œ (íƒœê·¸):

`#Express` `#íŒŒì¼ì—…ë¡œë“œ` `#multipart` `#multer` `#FormData` `#ContentType` `#expressStatic` `#AWS` `#S3` `#PresignedURL` `#ì„œë²„êµ¬ì¡°` `#NodeJS`

| ë‚ ì§œ | ì£¼ì œ | í•µì‹¬ ìš”ì•½ | ì‹¤ìŠµ ë‚´ìš© | ë¬¸ì œ í•´ê²° / ëŠë‚€ ì  | í‚¤ì›Œë“œ íƒœê·¸ | ë³µìŠµ í•„ìš” |
| --- | --- | --- | --- | --- | --- | --- |
| 2025-10-15 | íŒŒì¼ ì—…ë¡œë“œ | multipart/form-dataì™€ multerë¥¼ í™œìš©í•œ íŒŒì¼ ì—…ë¡œë“œ ë° ì •ì  íŒŒì¼ ì œê³µ | FormData, multer, express.static ì‹¤ìŠµ | multipart í—¤ë” ìë™ ì„¤ì • ì—¬ë¶€ í—·ê°ˆë¦¼ â†’ FormDataë¡œ í•´ê²° | `#Express` `#multer` `#FormData` `#íŒŒì¼ì—…ë¡œë“œ` `#AWS` `#S3` | âœ… |
