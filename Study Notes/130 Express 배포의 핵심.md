# Express 배포의 핵심

### 📅 날짜:

> 2025.01.08 (목)
> 

### 📘 오늘 공부한 주제:

> Express 배포의 핵심 요소 (Web Server · PM2 · Cloud Infrastructure)
> 

---

## 📝 핵심 개념 요약

- 운영 환경에서 Express 앱을 **안정적으로 서비스**하려면 Express 단독으로는 부족함
- 배포 환경에는 반드시 다음 **3가지 핵심 요소**가 필요함
    1. **웹 서버 (Nginx)**
        - 외부 HTTP/HTTPS 요청을 가장 먼저 받는 관문
        - 보안, 정적 파일 처리, 프록시 역할 담당
    2. **프로세스 매니저 (PM2)**
        - Node.js 앱이 죽지 않도록 관리
        - 자동 재시작, 클러스터링, 로그 관리 제공
    3. **클라우드 인프라 (AWS)**
        - 서버, 스토리지, DB, 로드밸런싱 등 서비스 기반 제공
- Express는 **웹 서버가 아니라 애플리케이션 서버(App Server)** 역할
- 실무에서는 **Nginx / ALB + PM2 + AWS** 구조가 기본

## 📊 핵심 요약 표

| 구분 | 대표 도구 | 역할 | 핵심 포인트 |
| --- | --- | --- | --- |
| 웹 서버 | Nginx | 외부 요청 수신, 프록시, HTTPS | Express를 외부에 직접 노출하지 않음 |
| 프로세스 매니저 | PM2 | 자동 재시작, 클러스터 | 무중단 서비스 유지 |
| 클라우드 인프라 | AWS | 서버·DB·네트워크 | 확장성과 안정성 확보 |

### 💻 실습 내용 정리

### 1️⃣ 웹 서버 – Nginx

- 포트 **80 / 443**에서 외부 요청 수신
- Express 서버(3000, 3001 등)로 요청 전달

```
Client → Nginx →Express App(3000 /3001)
```

**주요 역할**

- Reverse Proxy
- 정적 파일 직접 제공
- gzip 압축
- HTTPS(SSL/TLS)
- 보안 헤더 처리

---

### 2️⃣ 프로세스 매니저 – PM2

### ✅ 자동 재시작

- 서버 오류로 앱이 종료되어도 자동으로 재실행
- 서비스 다운타임 최소화

### ✅ 클러스터 모드

- CPU 코어 수만큼 프로세스 실행
- Node.js 싱글 스레드 한계 보완

```bash
pm2 start app.js -i max
```

### ✅ 로그 관리

```bash
pm2 logs
```

- stdout / stderr 로그 파일 저장
- 실시간 로그 확인 가능

---

### 3️⃣ 클라우드 인프라 – AWS

| 서비스 | 역할 |
| --- | --- |
| EC2 | Express 서버 실행 |
| S3 | 정적 파일 저장 |
| RDS | 관계형 DB (PostgreSQL) |
| ALB | 트래픽 분산 |
| Route 53 | 도메인 관리 |
| ACM | SSL 인증서 발급 |

### ❗ 헷갈렸던 점 / 문제 해결:

- **Express도 웹 서버 아닌가?**
    - 개발 환경에서는 가능
    - 운영 환경에서는 ❌
        
        → Express는 App Server, Nginx/ALB가 Web Server 역할
        
- **Nginx vs ALB**
    - 경쟁 관계 ❌
    - 함께 사용 ⭕
    - ALB = 외부 트래픽 진입점
    - Nginx = EC2 내부 라우팅 담당
- **PM2 클러스터 모드 필수?**
    - ALB + EC2 오토스케일링 환경에서는 필수 아님
    - 단일 EC2 성능 극대화 시 유용

### 💡 느낀 점 / 배운 점:

- 배포는 단순히 서버를 켜는 게 아니라
    
    **역할을 명확히 분리하는 작업**이라는 걸 이해함
    
- Express 하나로 모든 걸 처리하려는 구조는 실무에서 위험함
- 실무 배포 구조가 왜 이렇게 나뉘는지 이유가 명확해짐

### 🏷️ 키워드 (태그):

`Express` `배포` `Nginx` `PM2` `AWS` `웹서버` `리버스프록스` `로드밸런싱` `운영환경` 

| 날짜 | 주제 | 핵심 요약 | 실습 내용 | 문제 해결 / 느낀 점 | 키워드 태그 | 복습 필요 |
| --- | --- | --- | --- | --- | --- | --- |
| 2025-01-08 | Express 배포 핵심 요소 | Web Server, PM2, Cloud Infra가 필수. Express는 App Server 역할 | Nginx 역할 이해, PM2 명령어 정리, AWS 서비스 구성 파악 | Express ≠ Web Server, Nginx와 ALB 관계 이해 | `Express` `Nginx` `PM2` `AWS`  | ✅ |
